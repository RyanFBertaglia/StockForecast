{
  "type": "excalidraw",
  "version": 2,
  "source": "https://excalidraw.com",
  "elements": [
    {
      "id": "3jLz15reBXt4oLga1xnPe",
      "type": "text",
      "x": 76.62435414269567,
      "y": 140.87879943847656,
      "width": 674.3536376953125,
      "height": 59.09091949462888,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "a0",
      "roundness": null,
      "seed": 1787415912,
      "version": 103,
      "versionNonce": 70390120,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1766279493960,
      "link": null,
      "locked": false,
      "text": "PrevisÃ£o de Estoque em Java",
      "fontSize": 47.272735595703104,
      "fontFamily": 5,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "PrevisÃ£o de Estoque em Java",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "SN64m9ZvwKG5R1u02Mzw4",
      "type": "text",
      "x": 123,
      "y": 310,
      "width": 411.8597412109375,
      "height": 50,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "a1",
      "roundness": null,
      "seed": 1666728040,
      "version": 98,
      "versionNonce": 1517622120,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1766277378174,
      "link": null,
      "locked": false,
      "text": "Produtos com maior n de vendas\nÃ‰poca do ano com maior nÃºmero de vendas",
      "fontSize": 20,
      "fontFamily": 5,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "Produtos com maior n de vendas\nÃ‰poca do ano com maior nÃºmero de vendas",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "r-ZEWE_zoz5z6rm1P7mKa",
      "type": "text",
      "x": 374.9090881347656,
      "y": 272,
      "width": 809.2393798828125,
      "height": 25,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "a2",
      "roundness": null,
      "seed": 1590948456,
      "version": 73,
      "versionNonce": 1147424872,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1766277659302,
      "link": null,
      "locked": false,
      "text": "ML leve: PrevÃª produtos com alto risco de falta de estoque nos prÃ³ximos 7-15 dias",
      "fontSize": 20,
      "fontFamily": 5,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "ML leve: PrevÃª produtos com alto risco de falta de estoque nos prÃ³ximos 7-15 dias",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "4zVk3-7_dnjvGCyif2ZoT",
      "type": "text",
      "x": 677.8409118652344,
      "y": 403.86363983154297,
      "width": 540.429443359375,
      "height": 275,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "a3",
      "roundness": null,
      "seed": 446500712,
      "version": 6,
      "versionNonce": 444493416,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1766278957432,
      "link": null,
      "locked": false,
      "text": "sales-forecast-api/\nâ”œâ”€â”€ src/main/java/com/salesforecast/\nâ”‚   â”œâ”€â”€ controller/ForecastController.java\nâ”‚   â”œâ”€â”€ service/ModelService.java\nâ”‚   â””â”€â”€ model/StockOutPrediction.java\nâ”œâ”€â”€ src/main/resources/\nâ”‚   â””â”€â”€ model/\nâ”‚       â””â”€â”€ demand_forecast.onnx  # Copia do training\nâ”œâ”€â”€ pom.xml\nâ””â”€â”€ docker-compose.yml\n",
      "fontSize": 20,
      "fontFamily": 5,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "sales-forecast-api/\nâ”œâ”€â”€ src/main/java/com/salesforecast/\nâ”‚   â”œâ”€â”€ controller/ForecastController.java\nâ”‚   â”œâ”€â”€ service/ModelService.java\nâ”‚   â””â”€â”€ model/StockOutPrediction.java\nâ”œâ”€â”€ src/main/resources/\nâ”‚   â””â”€â”€ model/\nâ”‚       â””â”€â”€ demand_forecast.onnx  # Copia do training\nâ”œâ”€â”€ pom.xml\nâ””â”€â”€ docker-compose.yml\n",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "TGikTVQbqC72cOJEeCjOj",
      "type": "text",
      "x": -155.68181899362355,
      "y": 659.1666689211346,
      "width": 198.419921875,
      "height": 150,
      "angle": 0,
      "strokeColor": "#2f9e44",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "a5",
      "roundness": null,
      "seed": 856613912,
      "version": 7,
      "versionNonce": 2125548904,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1766280065233,
      "link": null,
      "locked": false,
      "text": "{\n    \"id\": \"23542523\",\n    \"name\": \"Mouse\",\n    \"days-left\": 13,\n    \"stock\": 2\n}",
      "fontSize": 20,
      "fontFamily": 5,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "{\n    \"id\": \"23542523\",\n    \"name\": \"Mouse\",\n    \"days-left\": 13,\n    \"stock\": 2\n}",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "hojL6QW1cLDu_f9uakyFM",
      "type": "text",
      "x": 247.27271490123303,
      "y": 744.6969105011834,
      "width": 334.53973388671875,
      "height": 100,
      "angle": 0,
      "strokeColor": "#2f9e44",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "a6",
      "roundness": null,
      "seed": 295211032,
      "version": 83,
      "versionNonce": 1108362520,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1766279564231,
      "link": null,
      "locked": false,
      "text": "Dependencias Spring\n    - Sqlite / JPA\n    - Springboot / Web\n    - spring-boot-starter-actuator",
      "fontSize": 20,
      "fontFamily": 5,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "Dependencias Spring\n    - Sqlite / JPA\n    - Springboot / Web\n    - spring-boot-starter-actuator",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "Eyxq-cgB04_17n2sMOq3V",
      "type": "text",
      "x": 986.8179775558557,
      "y": 743.9393370555455,
      "width": 1209.719482421875,
      "height": 275,
      "angle": 0,
      "strokeColor": "#1971c2",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "a8",
      "roundness": null,
      "seed": 2034716776,
      "version": 57,
      "versionNonce": 93742799,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1766320326454,
      "link": null,
      "locked": false,
      "text": "@GetMapping(\"/health\")\n    public ResponseEntity<String> health() {\n        boolean dbOk = stockService.testDatabase();\n        boolean modelOk = stockService.testModel();\n        \n        if (dbOk && modelOk) {\n            return ResponseEntity.ok(\"{\\\"status\\\":\\\"OK\\\",\\\"db\\\":\\\"connected\\\",\\\"model\\\":\\\"loaded\\\"}\");\n        } else {\n            return ResponseEntity.status(503).body(\"{\\\"status\\\":\\\"ERROR\\\",\\\"db\\\":\" + dbOk + \",\\\"model\\\":\" + modelOk + \"}\");\n        }\n    }",
      "fontSize": 20,
      "fontFamily": 5,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "@GetMapping(\"/health\")\n    public ResponseEntity<String> health() {\n        boolean dbOk = stockService.testDatabase();\n        boolean modelOk = stockService.testModel();\n        \n        if (dbOk && modelOk) {\n            return ResponseEntity.ok(\"{\\\"status\\\":\\\"OK\\\",\\\"db\\\":\\\"connected\\\",\\\"model\\\":\\\"loaded\\\"}\");\n        } else {\n            return ResponseEntity.status(503).body(\"{\\\"status\\\":\\\"ERROR\\\",\\\"db\\\":\" + dbOk + \",\\\"model\\\":\" + modelOk + \"}\");\n        }\n    }",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "_3pxM7ml3yDxLA_j4Bayx",
      "type": "text",
      "x": -269.31828088734153,
      "y": 892.5756477012453,
      "width": 287.579833984375,
      "height": 75,
      "angle": 0,
      "strokeColor": "#1971c2",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "a9",
      "roundness": null,
      "seed": 1828419608,
      "version": 89,
      "versionNonce": 279327329,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1766314963977,
      "link": null,
      "locked": false,
      "text": "Products\n    id, name, stock, category, \nmin-stock, created_at",
      "fontSize": 20,
      "fontFamily": 5,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "Products\n    id, name, stock, category, \nmin-stock, created_at",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "MWeJMcLgShSzmuGokweOd",
      "type": "text",
      "x": 89.54540980683169,
      "y": 921.5150474204836,
      "width": 221.0598602294922,
      "height": 50,
      "angle": 0,
      "strokeColor": "#1971c2",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "aA",
      "roundness": null,
      "seed": 979647256,
      "version": 123,
      "versionNonce": 799349528,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1766280000377,
      "link": null,
      "locked": false,
      "text": "Sells\n    id, id-product, date",
      "fontSize": 20,
      "fontFamily": 5,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "Sells\n    id, id-product, date",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "X7c2IsDX8oSXY6AcMQicx",
      "type": "text",
      "x": -111.51527948353254,
      "y": 512.4242169354575,
      "width": 420.879638671875,
      "height": 25,
      "angle": 0,
      "strokeColor": "#1971c2",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "aB",
      "roundness": null,
      "seed": 1790118504,
      "version": 13,
      "versionNonce": 297315864,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1766280969992,
      "link": null,
      "locked": false,
      "text": "onnx onnxruntime scikit-learn numpy pandas",
      "fontSize": 20,
      "fontFamily": 5,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "onnx onnxruntime scikit-learn numpy pandas",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "mSIGqwpKUTC5iGiLqztWN",
      "type": "text",
      "x": -42.27282749785542,
      "y": 1115.3029949622382,
      "width": 382.7796630859375,
      "height": 25,
      "angle": 0,
      "strokeColor": "#e8590c",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "aD",
      "roundness": null,
      "seed": 507408920,
      "version": 4,
      "versionNonce": 858360088,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1766280837164,
      "link": null,
      "locked": false,
      "text": "https://onnx.ai/sklearn-onnx/index.html",
      "fontSize": 20,
      "fontFamily": 5,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "https://onnx.ai/sklearn-onnx/index.html",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "9Siahvs7VDMAEETcjb-FE",
      "type": "text",
      "x": -58.9394941645221,
      "y": 1081.969661628905,
      "width": 164.05992126464844,
      "height": 25,
      "angle": 0,
      "strokeColor": "#e8590c",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "aE",
      "roundness": null,
      "seed": 442084712,
      "version": 23,
      "versionNonce": 620932968,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1766280852427,
      "link": null,
      "locked": false,
      "text": "Model para ONNX",
      "fontSize": 20,
      "fontFamily": 5,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "Model para ONNX",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "_6P3UQVcO5F77xQBU9OhI",
      "type": "text",
      "x": 1372.1966879847296,
      "y": 1133.5605985156103,
      "width": 609.7396240234375,
      "height": 450,
      "angle": 0,
      "strokeColor": "#1971c2",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "aG",
      "roundness": null,
      "seed": 1801249384,
      "version": 5,
      "versionNonce": 806734360,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1766282094811,
      "link": null,
      "locked": false,
      "text": "public int predictDaysUntilOutOfStock(\n        int stock,\n        LocalDate startDate) throws Exception {\n\n    int days = 0;\n\n    while (stock > 0) {\n        int dayOfWeek = startDate.getDayOfWeek().getValue();\n        float demand = model.predict(dayOfWeek);\n\n        stock -= Math.max(1, Math.round(demand));\n        startDate = startDate.plusDays(1);\n        days++;\n    }\n\n    return days;\n}\n",
      "fontSize": 20,
      "fontFamily": 5,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "public int predictDaysUntilOutOfStock(\n        int stock,\n        LocalDate startDate) throws Exception {\n\n    int days = 0;\n\n    while (stock > 0) {\n        int dayOfWeek = startDate.getDayOfWeek().getValue();\n        float demand = model.predict(dayOfWeek);\n\n        stock -= Math.max(1, Math.round(demand));\n        startDate = startDate.plusDays(1);\n        days++;\n    }\n\n    return days;\n}\n",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "J2cpTtGXycNPEaNQ1lerh",
      "type": "text",
      "x": 389.92404394176083,
      "y": 1087.424276494126,
      "width": 774.37939453125,
      "height": 3900,
      "angle": 0,
      "strokeColor": "#1971c2",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "aH",
      "roundness": null,
      "seed": 303818264,
      "version": 100,
      "versionNonce": 314672207,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1766320320693,
      "link": null,
      "locked": false,
      "text": "import sqlite3\nimport pandas as pd\nimport numpy as np\nfrom sklearn.ensemble import RandomForestRegressor\nfrom skl2onnx import convert_sklearn\nfrom skl2onnx.common.data_types import FloatTensorType\nimport json\nfrom datetime import datetime\n\n\ndef train_compatible_model(product_id=1):\n    \"\"\"Treina modelo com features compatÃ­veis com o Java\"\"\"\n\n    conn = sqlite3.connect(\"store.db\")\n\n    query = \"\"\"\n            SELECT s.date, \\\n                   s.quantity, \\\n                   strftime('%w', s.date) as day_of_week, \\\n                   strftime('%m', s.date) as month,\n        strftime('%d', s.date) as day_of_month\n            FROM Sells s\n            WHERE s.id_product = ?\n            ORDER BY s.date \\\n            \"\"\"\n\n    df = pd.read_sql(query, conn, params=(product_id,))\n    conn.close()\n\n    if len(df) < 10:\n        print(\"Dados insuficientes\")\n        return\n\n    df['date'] = pd.to_datetime(df['date'])\n    df['day_of_week'] = df['day_of_week'].astype(int)\n    df['month'] = df['month'].astype(int)\n    df['day_of_month'] = df['day_of_month'].astype(int)\n\n    # Features EXATAMENTE como serÃ£o usadas no Java\n    # 1. day_of_week (0-6, onde 0=Domingo)\n    # 2. month (1-12)\n    # 3. day_of_month (1-31)\n    # 4. days_since_reference (dias desde data fixa)\n    # 5. rolling_avg_7 (mÃ©dia Ãºltimos 7 dias)\n    # 6. rolling_avg_30 (mÃ©dia Ãºltimos 30 dias)\n    # 7. lag_1 (venda do dia anterior)\n    # 8. lag_7 (venda de 7 dias atrÃ¡s)\n\n    reference_date = pd.Timestamp('2025-05-25')\n    df['days_since_reference'] = (df['date'] - reference_date).dt.days\n\n    # Calcular mÃ©dias mÃ³veis\n    df['rolling_avg_7'] = df['quantity'].rolling(window=7, min_periods=1).mean()\n    df['rolling_avg_30'] = df['quantity'].rolling(window=30, min_periods=1).mean()\n\n    # Calcular lags\n    df['lag_1'] = df['quantity'].shift(1)\n    df['lag_7'] = df['quantity'].shift(7)\n\n    # Preencher valores NaN\n    df.fillna(0, inplace=True)\n\n    # Selecionar features (MESMA ORDEM que no Java!)\n    features = [\n        'day_of_week',\n        'month',\n        'day_of_month',\n        'days_since_reference',\n        'rolling_avg_7',\n        'rolling_avg_30',\n        'lag_1',\n        'lag_7'\n    ]\n\n    X = df[features].values\n    y = df['quantity'].values\n\n    # Treinar modelo\n    model = RandomForestRegressor(\n        n_estimators=50,\n        max_depth=10,\n        random_state=42,\n        n_jobs=-1\n    )\n\n    model.fit(X, y)\n\n    # Converter para ONNX\n    initial_type = [('input', FloatTensorType([None, len(features)]))]\n\n    onnx_model = convert_sklearn(\n        model,\n        initial_types=initial_type,\n        target_opset=12\n    )\n\n    # Salvar modelo\n    model_filename = f\"model_compatible_{product_id}.onnx\"\n    with open(model_filename, \"wb\") as f:\n        f.write(onnx_model.SerializeToString())\n\n    # Salvar metadados CRUCIAL\n    metadata = {\n        'product_id': product_id,\n        'features': features,\n        'feature_count': len(features),\n        'input_name': 'input',  # Nome exato do input no ONNX\n        'output_name': 'variable',  # Nome do output\n        'reference_date': '2025-05-25',\n        'training_date': datetime.now().isoformat(),\n        'data_points': len(df),\n        'model_type': 'RandomForestRegressor',\n        'notes': 'Features compatÃ­veis com Java StockPredictor'\n    }\n\n    metadata_filename = f\"metadata_{product_id}.json\"\n    with open(metadata_filename, 'w') as f:\n        json.dump(metadata, f, indent=2)\n\n    # Testar o modelo\n    test_features = np.array([[\n        2,  # TerÃ§a-feira\n        3,  # MarÃ§o\n        15,  # Dia 15\n        435,  # Dias desde 2023-01-01\n        5.2,  # MÃ©dia Ãºltimos 7 dias\n        4.8,  # MÃ©dia Ãºltimos 30 dias\n        6,  # Venda de ontem\n        5  # Venda de 7 dias atrÃ¡s\n    ]], dtype=np.float32)\n\n    test_prediction = model.predict(test_features)[0]\n\n    print(f\"âœ… Modelo treinado e salvo: {model_filename}\")\n    print(f\"ðŸ“Š Features: {features}\")\n    print(f\"ðŸ”¢ Test prediction: {test_prediction:.2f}\")\n    print(f\"ðŸ“ Metadata: {metadata_filename}\")\n\n    return model_filename, metadata_filename\n\n\ndef get_all_products():\n    conn = sqlite3.connect(\"store.db\")\n    query = \"SELECT DISTINCT id_product FROM Sells\"\n    df = pd.read_sql(query, conn)\n    conn.close()\n    return df['id_product'].tolist()\n\n\nif __name__ == \"__main__\":\n    products = get_all_products()\n    for product in products:\n        try:\n            train_compatible_model(product)\n        except Exception as e:\n            print(f\"âŒ Erro ao treinar produto {product}: {e}\")",
      "fontSize": 20,
      "fontFamily": 5,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "import sqlite3\nimport pandas as pd\nimport numpy as np\nfrom sklearn.ensemble import RandomForestRegressor\nfrom skl2onnx import convert_sklearn\nfrom skl2onnx.common.data_types import FloatTensorType\nimport json\nfrom datetime import datetime\n\n\ndef train_compatible_model(product_id=1):\n    \"\"\"Treina modelo com features compatÃ­veis com o Java\"\"\"\n\n    conn = sqlite3.connect(\"store.db\")\n\n    query = \"\"\"\n            SELECT s.date, \\\n                   s.quantity, \\\n                   strftime('%w', s.date) as day_of_week, \\\n                   strftime('%m', s.date) as month,\n        strftime('%d', s.date) as day_of_month\n            FROM Sells s\n            WHERE s.id_product = ?\n            ORDER BY s.date \\\n            \"\"\"\n\n    df = pd.read_sql(query, conn, params=(product_id,))\n    conn.close()\n\n    if len(df) < 10:\n        print(\"Dados insuficientes\")\n        return\n\n    df['date'] = pd.to_datetime(df['date'])\n    df['day_of_week'] = df['day_of_week'].astype(int)\n    df['month'] = df['month'].astype(int)\n    df['day_of_month'] = df['day_of_month'].astype(int)\n\n    # Features EXATAMENTE como serÃ£o usadas no Java\n    # 1. day_of_week (0-6, onde 0=Domingo)\n    # 2. month (1-12)\n    # 3. day_of_month (1-31)\n    # 4. days_since_reference (dias desde data fixa)\n    # 5. rolling_avg_7 (mÃ©dia Ãºltimos 7 dias)\n    # 6. rolling_avg_30 (mÃ©dia Ãºltimos 30 dias)\n    # 7. lag_1 (venda do dia anterior)\n    # 8. lag_7 (venda de 7 dias atrÃ¡s)\n\n    reference_date = pd.Timestamp('2025-05-25')\n    df['days_since_reference'] = (df['date'] - reference_date).dt.days\n\n    # Calcular mÃ©dias mÃ³veis\n    df['rolling_avg_7'] = df['quantity'].rolling(window=7, min_periods=1).mean()\n    df['rolling_avg_30'] = df['quantity'].rolling(window=30, min_periods=1).mean()\n\n    # Calcular lags\n    df['lag_1'] = df['quantity'].shift(1)\n    df['lag_7'] = df['quantity'].shift(7)\n\n    # Preencher valores NaN\n    df.fillna(0, inplace=True)\n\n    # Selecionar features (MESMA ORDEM que no Java!)\n    features = [\n        'day_of_week',\n        'month',\n        'day_of_month',\n        'days_since_reference',\n        'rolling_avg_7',\n        'rolling_avg_30',\n        'lag_1',\n        'lag_7'\n    ]\n\n    X = df[features].values\n    y = df['quantity'].values\n\n    # Treinar modelo\n    model = RandomForestRegressor(\n        n_estimators=50,\n        max_depth=10,\n        random_state=42,\n        n_jobs=-1\n    )\n\n    model.fit(X, y)\n\n    # Converter para ONNX\n    initial_type = [('input', FloatTensorType([None, len(features)]))]\n\n    onnx_model = convert_sklearn(\n        model,\n        initial_types=initial_type,\n        target_opset=12\n    )\n\n    # Salvar modelo\n    model_filename = f\"model_compatible_{product_id}.onnx\"\n    with open(model_filename, \"wb\") as f:\n        f.write(onnx_model.SerializeToString())\n\n    # Salvar metadados CRUCIAL\n    metadata = {\n        'product_id': product_id,\n        'features': features,\n        'feature_count': len(features),\n        'input_name': 'input',  # Nome exato do input no ONNX\n        'output_name': 'variable',  # Nome do output\n        'reference_date': '2025-05-25',\n        'training_date': datetime.now().isoformat(),\n        'data_points': len(df),\n        'model_type': 'RandomForestRegressor',\n        'notes': 'Features compatÃ­veis com Java StockPredictor'\n    }\n\n    metadata_filename = f\"metadata_{product_id}.json\"\n    with open(metadata_filename, 'w') as f:\n        json.dump(metadata, f, indent=2)\n\n    # Testar o modelo\n    test_features = np.array([[\n        2,  # TerÃ§a-feira\n        3,  # MarÃ§o\n        15,  # Dia 15\n        435,  # Dias desde 2023-01-01\n        5.2,  # MÃ©dia Ãºltimos 7 dias\n        4.8,  # MÃ©dia Ãºltimos 30 dias\n        6,  # Venda de ontem\n        5  # Venda de 7 dias atrÃ¡s\n    ]], dtype=np.float32)\n\n    test_prediction = model.predict(test_features)[0]\n\n    print(f\"âœ… Modelo treinado e salvo: {model_filename}\")\n    print(f\"ðŸ“Š Features: {features}\")\n    print(f\"ðŸ”¢ Test prediction: {test_prediction:.2f}\")\n    print(f\"ðŸ“ Metadata: {metadata_filename}\")\n\n    return model_filename, metadata_filename\n\n\ndef get_all_products():\n    conn = sqlite3.connect(\"store.db\")\n    query = \"SELECT DISTINCT id_product FROM Sells\"\n    df = pd.read_sql(query, conn)\n    conn.close()\n    return df['id_product'].tolist()\n\n\nif __name__ == \"__main__\":\n    products = get_all_products()\n    for product in products:\n        try:\n            train_compatible_model(product)\n        except Exception as e:\n            print(f\"âŒ Erro ao treinar produto {product}: {e}\")",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "0Lg2d90zt360vpra4tsWS",
      "type": "text",
      "x": -232.20810080456545,
      "y": 399.5346587826913,
      "width": 726.1997680664062,
      "height": 50,
      "angle": 0,
      "strokeColor": "#e03131",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "aI",
      "roundness": null,
      "seed": 29213720,
      "version": 191,
      "versionNonce": 1028848744,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1766282917025,
      "link": null,
      "locked": false,
      "text": "PROBLEMA\nCOMO EU VOU SEPARAR OS PRODUTOS EM UM ÃšNICO MODELO DE ML",
      "fontSize": 20,
      "fontFamily": 5,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "PROBLEMA\nCOMO EU VOU SEPARAR OS PRODUTOS EM UM ÃšNICO MODELO DE ML",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "xT5L04tBlcfbimajwIeTF",
      "type": "text",
      "x": 1405.9736618907473,
      "y": 1778.3225551202788,
      "width": 759.3994750976562,
      "height": 1275,
      "angle": 0,
      "strokeColor": "#1971c2",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "aJ",
      "roundness": null,
      "seed": 87248943,
      "version": 5,
      "versionNonce": 1543899713,
      "isDeleted": true,
      "boundElements": null,
      "updated": 1766313209194,
      "link": null,
      "locked": false,
      "text": "# predict_with_onnx.py - Carrega seu modelo e prevÃª\nimport onnxruntime as ort\nimport numpy as np\nfrom datetime import datetime, timedelta\n\n# 1. Carrega o modelo ONNX (seu product_aware_model.onnx)\nsession = ort.InferenceSession(\"product_aware_model.onnx\")\n\ndef predict_days_until_out_of_stock(product_id, initial_stock):\n    \"\"\"SimulaÃ§Ã£o igual ao Java!\"\"\"\n    stock = initial_stock\n    start_date = datetime.now()\n    days = 0\n    \n    print(f\"\\nðŸ” Produto {product_id}, estoque inicial: {stock}\")\n    \n    while stock > 0:\n        # Dia da semana (0=Seg, 6=Dom)\n        day_of_week = start_date.weekday()\n        \n        # Input: [dia_semana, product_id]\n        input_data = np.array([[day_of_week, product_id]], dtype=np.float32)\n        \n        # 2. RUN ONNX!\n        inputs = {\n            'day_of_week': input_data[:, 0:1],  # Primeira coluna\n            'product_id': input_data[:, 1:2]    # Segunda coluna\n        }\n        \n        demand = session.run(None, inputs)[0][0][0]  # Output do modelo\n        \n        sales_today = max(1, round(demand))\n        stock -= sales_today\n        days += 1\n        \n        print(f\"Dia {days:2d} ({start_date.strftime('%a')}): \"\n              f\"{demand:.1f} â†’ {sales_today} un, estoque={stock}\")\n        \n        start_date += timedelta(days=1)\n    \n    print(f\"âœ… ACABA EM {days} DIAS\")\n    return days\n\n# ðŸš€ TESTE\nif __name__ == \"__main__\":\n    # Testa Mouse (ID=1)\n    predict_days_until_out_of_stock(1, 10)\n    \n    # Testa Cerveja (ID=2)  \n    predict_days_until_out_of_stock(2, 15)\n",
      "fontSize": 20,
      "fontFamily": 5,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "# predict_with_onnx.py - Carrega seu modelo e prevÃª\nimport onnxruntime as ort\nimport numpy as np\nfrom datetime import datetime, timedelta\n\n# 1. Carrega o modelo ONNX (seu product_aware_model.onnx)\nsession = ort.InferenceSession(\"product_aware_model.onnx\")\n\ndef predict_days_until_out_of_stock(product_id, initial_stock):\n    \"\"\"SimulaÃ§Ã£o igual ao Java!\"\"\"\n    stock = initial_stock\n    start_date = datetime.now()\n    days = 0\n    \n    print(f\"\\nðŸ” Produto {product_id}, estoque inicial: {stock}\")\n    \n    while stock > 0:\n        # Dia da semana (0=Seg, 6=Dom)\n        day_of_week = start_date.weekday()\n        \n        # Input: [dia_semana, product_id]\n        input_data = np.array([[day_of_week, product_id]], dtype=np.float32)\n        \n        # 2. RUN ONNX!\n        inputs = {\n            'day_of_week': input_data[:, 0:1],  # Primeira coluna\n            'product_id': input_data[:, 1:2]    # Segunda coluna\n        }\n        \n        demand = session.run(None, inputs)[0][0][0]  # Output do modelo\n        \n        sales_today = max(1, round(demand))\n        stock -= sales_today\n        days += 1\n        \n        print(f\"Dia {days:2d} ({start_date.strftime('%a')}): \"\n              f\"{demand:.1f} â†’ {sales_today} un, estoque={stock}\")\n        \n        start_date += timedelta(days=1)\n    \n    print(f\"âœ… ACABA EM {days} DIAS\")\n    return days\n\n# ðŸš€ TESTE\nif __name__ == \"__main__\":\n    # Testa Mouse (ID=1)\n    predict_days_until_out_of_stock(1, 10)\n    \n    # Testa Cerveja (ID=2)  \n    predict_days_until_out_of_stock(2, 15)\n",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "6yihCAIOl3135worMTXvO",
      "type": "text",
      "x": 1385.0644415131433,
      "y": 1850.898181178307,
      "width": 1053.29931640625,
      "height": 2375,
      "angle": 0,
      "strokeColor": "#1971c2",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "aK",
      "roundness": null,
      "seed": 2093805871,
      "version": 50,
      "versionNonce": 1481466831,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1766320311670,
      "link": null,
      "locked": false,
      "text": "import onnxruntime as ort\nimport numpy as np\nimport json\nimport sqlite3\nimport pandas as pd\nfrom datetime import datetime, timedelta\n\ndef load_model(product_id):\n    session = ort.InferenceSession(f\"model_compatible_{product_id}.onnx\")\n\n    with open(f\"metadata_{product_id}.json\") as f:\n        metadata = json.load(f)\n\n    return session, metadata\n\n\ndef predict_stockout(product_id, initial_stock, history):\n    \"\"\"\n    history: lista de vendas passadas (ordem cronolÃ³gica)\n    \"\"\"\n\n    session, metadata = load_model(product_id)\n\n    stock = initial_stock\n    date = datetime.now()\n    days = 0\n\n    reference_date = datetime.fromisoformat(metadata['reference_date'])\n\n    while stock > 0:\n        day_of_week = (date.weekday() + 6) % 7\n        month = date.month\n        day_of_month = date.day\n        days_since_ref = (date - reference_date).days\n\n        rolling_avg_7 = np.mean(history[-7:]) if len(history) >= 7 else np.mean(history)\n        rolling_avg_30 = np.mean(history[-30:]) if len(history) >= 30 else np.mean(history)\n\n        lag_1 = history[-1] if len(history) >= 1 else 0\n        lag_7 = history[-7] if len(history) >= 7 else 0\n\n        feature_map = {\n            \"day_of_week\": day_of_week,\n            \"month\": month,\n            \"day_of_month\": day_of_month,\n            \"days_since_reference\": days_since_ref,\n            \"rolling_avg_7\": rolling_avg_7,\n            \"rolling_avg_30\": rolling_avg_30,\n            \"lag_1\": lag_1,\n            \"lag_7\": lag_7\n        }\n\n        features = np.array(\n            [[feature_map[f] for f in metadata['features']]],\n            dtype=np.float32\n        )\n\n        demand = session.run(\n            None,\n            {metadata['input_name']: features}\n        )[0][0][0]\n\n        sales_today = round(demand, 3)\n\n        print(f\"Dia {days + 1}: demanda={demand:.2f}, vendas={sales_today}, stock={stock - sales_today}\")\n\n        stock -= sales_today\n        history.append(sales_today)\n\n        date += timedelta(days=1)\n        days += 1\n\n    return days\n\ndef load_sales_history(product_id, limit=30):\n    conn = sqlite3.connect(\"store.db\")\n\n    query = \"\"\"\n        SELECT quantity\n        FROM Sells\n        WHERE id_product = ?\n        ORDER BY date DESC\n        LIMIT ?\n    \"\"\"\n\n    df = pd.read_sql(query, conn, params=(product_id, limit))\n    conn.close()\n\n    return df.iloc[::-1]['quantity'].tolist()\n\n\nif __name__ == \"__main__\":\n    history = load_sales_history(25, limit=30)\n    print(predict_stockout(25, 20, history))\n",
      "fontSize": 20,
      "fontFamily": 5,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "import onnxruntime as ort\nimport numpy as np\nimport json\nimport sqlite3\nimport pandas as pd\nfrom datetime import datetime, timedelta\n\ndef load_model(product_id):\n    session = ort.InferenceSession(f\"model_compatible_{product_id}.onnx\")\n\n    with open(f\"metadata_{product_id}.json\") as f:\n        metadata = json.load(f)\n\n    return session, metadata\n\n\ndef predict_stockout(product_id, initial_stock, history):\n    \"\"\"\n    history: lista de vendas passadas (ordem cronolÃ³gica)\n    \"\"\"\n\n    session, metadata = load_model(product_id)\n\n    stock = initial_stock\n    date = datetime.now()\n    days = 0\n\n    reference_date = datetime.fromisoformat(metadata['reference_date'])\n\n    while stock > 0:\n        day_of_week = (date.weekday() + 6) % 7\n        month = date.month\n        day_of_month = date.day\n        days_since_ref = (date - reference_date).days\n\n        rolling_avg_7 = np.mean(history[-7:]) if len(history) >= 7 else np.mean(history)\n        rolling_avg_30 = np.mean(history[-30:]) if len(history) >= 30 else np.mean(history)\n\n        lag_1 = history[-1] if len(history) >= 1 else 0\n        lag_7 = history[-7] if len(history) >= 7 else 0\n\n        feature_map = {\n            \"day_of_week\": day_of_week,\n            \"month\": month,\n            \"day_of_month\": day_of_month,\n            \"days_since_reference\": days_since_ref,\n            \"rolling_avg_7\": rolling_avg_7,\n            \"rolling_avg_30\": rolling_avg_30,\n            \"lag_1\": lag_1,\n            \"lag_7\": lag_7\n        }\n\n        features = np.array(\n            [[feature_map[f] for f in metadata['features']]],\n            dtype=np.float32\n        )\n\n        demand = session.run(\n            None,\n            {metadata['input_name']: features}\n        )[0][0][0]\n\n        sales_today = round(demand, 3)\n\n        print(f\"Dia {days + 1}: demanda={demand:.2f}, vendas={sales_today}, stock={stock - sales_today}\")\n\n        stock -= sales_today\n        history.append(sales_today)\n\n        date += timedelta(days=1)\n        days += 1\n\n    return days\n\ndef load_sales_history(product_id, limit=30):\n    conn = sqlite3.connect(\"store.db\")\n\n    query = \"\"\"\n        SELECT quantity\n        FROM Sells\n        WHERE id_product = ?\n        ORDER BY date DESC\n        LIMIT ?\n    \"\"\"\n\n    df = pd.read_sql(query, conn, params=(product_id, limit))\n    conn.close()\n\n    return df.iloc[::-1]['quantity'].tolist()\n\n\nif __name__ == \"__main__\":\n    history = load_sales_history(25, limit=30)\n    print(predict_stockout(25, 20, history))\n",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "UxnkmX6kBH4dfyT4qIz9j",
      "type": "text",
      "x": 920.8508596249528,
      "y": 865.2165223963182,
      "width": 8,
      "height": 25,
      "angle": 0,
      "strokeColor": "#1971c2",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "aL",
      "roundness": null,
      "seed": 1651615343,
      "version": 3,
      "versionNonce": 666900143,
      "isDeleted": true,
      "boundElements": null,
      "updated": 1766320331329,
      "link": null,
      "locked": false,
      "text": "",
      "fontSize": 20,
      "fontFamily": 5,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "b2sCY81_heaJN1boQvmir",
      "type": "rectangle",
      "x": -989.451671299526,
      "y": 311.07829346461403,
      "width": 570.895141973585,
      "height": 387.4338273953942,
      "angle": 0,
      "strokeColor": "#343a40",
      "backgroundColor": "#e9ecef",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "aM",
      "roundness": {
        "type": 3
      },
      "seed": 555454369,
      "version": 149,
      "versionNonce": 1971968751,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1766320610892,
      "link": null,
      "locked": false
    },
    {
      "id": "1kWv-qqmGEU7KCQ2malux",
      "type": "rectangle",
      "x": -984.4378980712883,
      "y": 318.37115884924447,
      "width": 570.895141973585,
      "height": 387.4338273953942,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "aMV",
      "roundness": {
        "type": 3
      },
      "seed": 1444448687,
      "version": 145,
      "versionNonce": 1150199055,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1766320610892,
      "link": null,
      "locked": false
    },
    {
      "id": "P7ZHdySQXyYOZESdVypX8",
      "type": "text",
      "x": -875.1587571517373,
      "y": 334.4382612675231,
      "width": 325.59732391126033,
      "height": 47.859462557695664,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "aN",
      "roundness": null,
      "seed": 1785234241,
      "version": 203,
      "versionNonce": 146090799,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1766320610892,
      "link": null,
      "locked": false,
      "text": "Produto: Teclado",
      "fontSize": 38.28757004615652,
      "fontFamily": 5,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "Produto: Teclado",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "3PinvszxKMaIumoiqA63G",
      "type": "rectangle",
      "x": -950.708366977894,
      "y": 428.4479820235331,
      "width": 512.7800898595427,
      "height": 246.13443624710567,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#e9ecef",
      "fillStyle": "hachure",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "aO",
      "roundness": {
        "type": 3
      },
      "seed": 1610587937,
      "version": 183,
      "versionNonce": 778431823,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1766320610892,
      "link": null,
      "locked": false
    },
    {
      "id": "3PLuNj7Gliq9Twb5V3CLh",
      "type": "line",
      "x": -950.708366977894,
      "y": 497.95813151948096,
      "width": 113.95112682960529,
      "height": 1.1395078255586566,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#e9ecef",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "aP",
      "roundness": {
        "type": 2
      },
      "seed": 1033937089,
      "version": 186,
      "versionNonce": 16345967,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1766320610892,
      "link": null,
      "locked": false,
      "points": [
        [
          0,
          0
        ],
        [
          113.95112682960529,
          -1.1395078255586566
        ]
      ],
      "startBinding": null,
      "endBinding": null,
      "startArrowhead": null,
      "endArrowhead": null,
      "polygon": false
    },
    {
      "id": "UWGFY7J0SgKoRxIVEk6wd",
      "type": "line",
      "x": -837.8967479738474,
      "y": 497.95813151948096,
      "width": 131.04378246562288,
      "height": 19.371671287134898,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#e9ecef",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "aQ",
      "roundness": {
        "type": 2
      },
      "seed": 1461855137,
      "version": 156,
      "versionNonce": 1287136655,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1766320610892,
      "link": null,
      "locked": false,
      "points": [
        [
          0,
          0
        ],
        [
          131.04378246562288,
          19.371671287134898
        ]
      ],
      "startBinding": null,
      "endBinding": null,
      "startArrowhead": null,
      "endArrowhead": null,
      "polygon": false
    },
    {
      "id": "27rSQtaTWDQFFfIJVKxYd",
      "type": "line",
      "x": -705.7134194300281,
      "y": 517.3298028066158,
      "width": 103.69547989430191,
      "height": 54.69656689000417,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#e9ecef",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "aR",
      "roundness": {
        "type": 2
      },
      "seed": 1397047873,
      "version": 117,
      "versionNonce": 1088068527,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1766320610892,
      "link": null,
      "locked": false,
      "points": [
        [
          0,
          0
        ],
        [
          103.69547989430191,
          54.69656689000417
        ]
      ],
      "startBinding": null,
      "endBinding": null,
      "startArrowhead": null,
      "endArrowhead": null,
      "polygon": false
    },
    {
      "id": "4Edm1Co-m83YE92mIYGsA",
      "type": "line",
      "x": -600.8784699628052,
      "y": 570.8868618710613,
      "width": 120.78821203559497,
      "height": 34.18534952467291,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#e9ecef",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "dotted",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "aS",
      "roundness": {
        "type": 2
      },
      "seed": 1886475713,
      "version": 153,
      "versionNonce": 294211023,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1766320610892,
      "link": null,
      "locked": false,
      "points": [
        [
          0,
          0
        ],
        [
          120.78821203559497,
          34.18534952467291
        ]
      ],
      "startBinding": null,
      "endBinding": null,
      "startArrowhead": null,
      "endArrowhead": null,
      "polygon": false
    },
    {
      "id": "jT_PStdPsChtVokRGFV8D",
      "type": "line",
      "x": -482.3692735783276,
      "y": 603.9326653175378,
      "width": 44.44099645997629,
      "height": 29.627318222438284,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#e9ecef",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "dotted",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "aT",
      "roundness": {
        "type": 2
      },
      "seed": 1735277761,
      "version": 112,
      "versionNonce": 1507638255,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1766320610892,
      "link": null,
      "locked": false,
      "points": [
        [
          0,
          0
        ],
        [
          44.44099645997629,
          29.627318222438284
        ]
      ],
      "startBinding": null,
      "endBinding": null,
      "startArrowhead": null,
      "endArrowhead": null,
      "polygon": false
    },
    {
      "id": "SdUVp0_ijOIfkWLROyoxC",
      "type": "rectangle",
      "x": -847.7853098086407,
      "y": 256.1255647547166,
      "width": 484.09088134765625,
      "height": 495.4545211791992,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "aU",
      "roundness": {
        "type": 3
      },
      "seed": 1966900481,
      "version": 99,
      "versionNonce": 1338052495,
      "isDeleted": true,
      "boundElements": null,
      "updated": 1766320497012,
      "link": null,
      "locked": false
    },
    {
      "id": "-vI1M7tn-YSEcUklpt34G",
      "type": "ellipse",
      "x": -622.5291569010574,
      "y": 497.95813151948096,
      "width": 202.83300499164466,
      "height": 191.43788848342032,
      "angle": 0,
      "strokeColor": "#e03131",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 4,
      "strokeStyle": "dashed",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "aV",
      "roundness": {
        "type": 2
      },
      "seed": 282712097,
      "version": 138,
      "versionNonce": 1037919759,
      "isDeleted": false,
      "boundElements": [
        {
          "id": "-4ycnfNe5sF1bJewuyKtC",
          "type": "arrow"
        }
      ],
      "updated": 1766320610892,
      "link": null,
      "locked": false
    },
    {
      "id": "-4ycnfNe5sF1bJewuyKtC",
      "type": "arrow",
      "x": -674.9466698873066,
      "y": 811.3237016114172,
      "width": 72.98023943656376,
      "height": 150.6555740597211,
      "angle": 0,
      "strokeColor": "#e03131",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 4,
      "strokeStyle": "dashed",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "aW",
      "roundness": {
        "type": 2
      },
      "seed": 1976902433,
      "version": 148,
      "versionNonce": 1283705903,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1766320610892,
      "link": null,
      "locked": false,
      "points": [
        [
          0,
          0
        ],
        [
          72.98023943656376,
          -150.6555740597211
        ]
      ],
      "startBinding": null,
      "endBinding": {
        "elementId": "-vI1M7tn-YSEcUklpt34G",
        "mode": "orbit",
        "fixedPoint": [
          0.2613238893879014,
          0.5001
        ]
      },
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "elbowed": false
    },
    {
      "id": "Cp0JffD8nDs5bDMLrWL62",
      "type": "text",
      "x": -776.4770504856731,
      "y": 817.4770984308152,
      "width": 193.45441699358204,
      "height": 59.25463644487657,
      "angle": 0,
      "strokeColor": "#e03131",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 4,
      "strokeStyle": "dashed",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "aX",
      "roundness": null,
      "seed": 879418895,
      "version": 134,
      "versionNonce": 565734991,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1766320610892,
      "link": null,
      "locked": false,
      "text": "PrevisÃ£o",
      "fontSize": 47.40370915590125,
      "fontFamily": 5,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "PrevisÃ£o",
      "autoResize": true,
      "lineHeight": 1.25
    }
  ],
  "appState": {
    "gridSize": 20,
    "gridStep": 5,
    "gridModeEnabled": false,
    "viewBackgroundColor": "#ffffff",
    "lockedMultiSelections": {}
  },
  "files": {}
}